###################################################
Read me - Agriculture intensification thread
08/31/2015
###################################################
Important notes: 
1.	In this implementation of the thread, we only focus on maize, as opposed to all crops cultivated by the farmers. 
2.	Irrigation is not yet included into the thread.  
3.	The subset of households for the SAGCOT area from the Tanzania LSMS 2013 data has been selected based on the main regions falling within the SAGCOT boundaries. We are currently working on improving the selection process by selecting only households that have enumeration areas falling within the SAGCOT boundaries. 
4.	For national/regional level analysis, GLobCover 2009 is used. 


###################################################
  1. Tanzania: LSMS 2013 at the SAGCOT level
###################################################

The Agriculture Intensification indicators are generated for the SAGCOT area using the LSMS 2013 data, the total production capacity raster (IIAS-IISA) for yield potential, and the 250m resolution GlobCover 2009 product to obtain cultivated area. The Ag.Master.TZA.LSMS.Sagcot.R script joins all these calculation together into one file. 

Ag.Master.TZA.LSMS.Sagcot.R: master file that pulls field level data (Ag.FieldData.TZA.LSMS.R), potential yields (Ag.PotentialYield.TZA.R), and area cultivated (Ag.CultivatedArea.GlobCover.TZA.R) before calculating the indicators for the SAGCOT area in Tanzania based on the LSMS 2013 data. 
It generates a csv file (Ag.Intensification.TZA.LSMS.Sagcot.2013) with the main indicators from the thread: 
•	AI47 (Agricultural output intensity)
•	AI48 (Yield gap)
•	AI49 (Agricultural input impact intensity)
•	and AI50 (Landscape input impact intensity)
Ag.FieldData.TZA.LSMS: uses LSMS 2013 field data to calculate fertilizer input (N and P usage in kg/ha) on maize, maize yield (kg/ha), and the number of maize crops cultivated per year per field, as well as the percentage of area cultivated allocated to maize at the household level.
Ag.PotentialYield.TZA.R: calculates the potential maize yield (kg/ha) of the SAGCOT region (and the potential yield by landscape in kg/ha) using the IIASA-IISA Total production capacity raster file. The function CellStats is used to average the value of the pixels inside the SAGCOT area and the landscapes.
Ag.CultivatedArea.Globecover.TZA.R: calculates the cultivated area at the SAGCOT level using Globcover 2009 (GLOBCOVER_SAGCOT_CI_L4_200901_200912_V2.3.tif) by counting the number of cells falling into cultivated area classes. This includes the following classes:  11 - Post-flooding or irrigated croplands (or aquatic); 14 - Rainfed croplands; 20 - Mosaic cropland (50-70%) / vegetation (grassland/shrubland/forest) (20-50%); and 30 - Mosaic vegetation (grassland/shrubland/forest) (50-70%) / cropland (20-50%) (codes 20 and 30 are weighted by .6 and .35 since they are mixed classes and to only account the area within the class that is cropland). 

###################################################
  2. Tanzania: Vital Signs at landscape level (Tier 4)
###################################################

The Agriculture Intensification indicators are generated for Mufindi (L10) and Kilolo (L18), where high resolution land cover imagery (Family5 products from UMD) is available. 

2.1. L10: Mufindi
Ag.CultivatedAreaFamily5.TZA.R: uses high resolution land cover imagery from UMD (vs_tanzania_10_v2.tif, vs_tanzania_18_v2.tif ) in order to determine the area cultivated by counting the number of cells falling into agriculture area (code 1 for L10, code 0 for L18). 
It generates a csv file (TZA.AreaCultivated.Family5) with the key outcomes for landscapes L10 and L18: 
•	Area cultivated (ha)
•	Total area of the landscape (ha)
•	Percentage cultivated (%)
Note that running this file in R requires significant memory and processing power) and is more time consuming than other operations in the thread (about 40min running time) - this is to be ran first, as a prerequisite to running the Ag.Master.TZA.L10.R or Ag.Master.TZA.L18.R files. 

Ag.Master.TZA.L10.R: master file that subsets field data from L10 in 2014 (Ag.FieldData.TZA.VS.R), potential yields (Ag.PotentialYield.TZA.R), and uses the output table TZA.AreaCultivated.Family5 (from the Family5 area cultivated script) before calculating the indicators for L10 based on the Vital Signs data. 
It generates a csv file (Ag.Intensification.TZA.VS.L10.2014) with the main indicators from the thread: 
•	AI47 (Agricultural output intensity)
•	AI48 (Yield gap)
•	AI49 (Agricultural input impact intensity)
•	and AI50 (Landscape input impact intensity)

Ag.FieldData.VS: uses Vital Signs household survey data to calculate fertilizer input (N and P usage in kg/ha) for maize, maize yield (kg/ha), and the number of crops cultivated per year per field, as well as the percentage of area cultivated allocated to maize at the household level for all the Vital Signs data available. 

Ag.PotentialYield.TZA.R : see above. 

2.2. L18: Kilolo
Same process as for L10, with a new join file (Ag.Master.TZA.L18.R).

###################################################
  3. Ghana: Vital Signs at landscape level (Tier 4)
###################################################
The Agriculture Intensification indicators are generated for the Semi-deciduous Forest (L04) and Coastal Savannah (L06) landscapes, where high resolution land cover imagery (Family5 products from UMD) is available. 

3.1. L04: Semi-deciduous Forest
Ag.CultivatedAreaFamily5.GHA.R: uses high resolution land cover imagery from UMD (vs_ghana_sdf.tif, vs_ghana_cs.tif) in order to determine the area cultivated by counting the number of cells falling into agriculture area (code 0 for L04, code 1 for L06). 
It generates a csv file (GHA.AreaCultivated.Family5) with the key outcomes for landscapes L04 and L06: 
•	Area cultivated (ha)
•	Total area of the landscape (ha)
•	Percentage cultivated (%)
Note that running this file in R requires significant memory and processing power) and is more time consuming than other operations in the thread (about 40min running time) - this is to be ran first, as a prerequisite, before running the Ag.Master.GHA.L04.R or Ag.Master.GHA.L06.R files. 

Ag.Master.GHA.L04.R: master file that subsets field data from L04 in 2014 (Ag.FieldData.VS.R), potential yields (Ag.PotentialYield.TZA.R), and uses the output table TZA.AreaCultivated.Family5 (from the Family5 area cultivated script) before calculating the indicators for L10 based on the Vital Signs data. 
It generates a csv file (Ag.Intensification.TZA.VS.L04.2014) with the main indicators from the thread: 
•	AI47 (Agricultural output intensity)
•	AI48 (Yield gap)
•	AI49 (Agricultural input impact intensity)
•	and AI50 (Landscape input impact intensity)

Ag.FieldData.VS: uses Vital Signs household survey data to calculate fertilizer input (N and P usage in kg/ha) for maize, maize yield (kg/ha), and the number of crops cultivated per year per field, as well as the percentage of area cultivated allocated to maize at the household level for all the Vital Signs data available. 

Ag.PotentialYield.GHA.R: calculates the potential yield by landscape (in kg/ha) in Ghana using the IISA Total production capacity raster file. 

3.2. L06: Costal Savannah
Same process as for L04, with a new join file (Ag.Master.GHA.L06.R).
